{
  "$schema": "https://json-schema.org/draft/2019-09/schema",
  "title": "TrustHive Services Configuration",
  "description": "Configuration file for managing TrustHive services dynamically in CI/CD pipelines",
  "version": "1.0.0",
  "services": {
    "common": {
      "description": "Shared libraries and packages",
      "packages": [
        {
          "name": "@trusthive/interface-types",
          "path": "common/interface",
          "type": "library",
          "publishable": true,
          "required_for_build": true
        },
        {
          "name": "@trusthive/prisma-config", 
          "path": "common/prisma",
          "type": "library",
          "publishable": true,
          "required_for_build": true
        }
      ]
    },
    "auth": {
      "description": "Authentication services",
      "services": [
        {
          "name": "@trusthive/auth-service",
          "path": "auth/service", 
          "type": "docker",
          "dockerfile": "Dockerfile",
          "port": 3000,
          "dependencies": [
            "@trusthive/interface-types",
            "@trusthive/prisma-config"
          ]
        },
        {
          "name": "@trusthive/auth-lambda",
          "path": "auth/lambda",
          "type": "lambda",
          "runtime": "nodejs18.x",
          "dependencies": [
            "@trusthive/interface-types"
          ]
        }
      ]
    }
  },
  "ci_cd": {
    "docker_registry": "ghcr.io",
    "npm_registry": "https://npm.pkg.github.com",
    "node_version": "18",
    "build_order": [
      "common",
      "services"
    ],
    "package_availability_timeout": 600,
    "retry_intervals": 30
  }
}
