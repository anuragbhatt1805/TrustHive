"use strict";var A=Object.create;var n=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var w=Object.getPrototypeOf,C=Object.prototype.hasOwnProperty;var i=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),q=(e,t)=>{for(var s in t)n(e,s,{get:t[s],enumerable:!0})},c=(e,t,s,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of R(t))!C.call(e,r)&&r!==s&&n(e,r,{get:()=>t[r],enumerable:!(a=P(t,r))||a.enumerable});return e};var _=(e,t,s)=>(s=e!=null?A(w(e)):{},c(t||!e||!e.__esModule?n(s,"default",{value:e,enumerable:!0}):s,e)),O=e=>c(n({},"__esModule",{value:!0}),e);var m=i(l=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0})});var b=i(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0})});var y=i(h=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0})});var f=i(o=>{"use strict";var j=o&&o.__createBinding||(Object.create?function(e,t,s,a){a===void 0&&(a=s);var r=Object.getOwnPropertyDescriptor(t,s);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,a,r)}:function(e,t,s,a){a===void 0&&(a=s),e[a]=t[s]}),u=o&&o.__exportStar||function(e,t){for(var s in e)s!=="default"&&!Object.prototype.hasOwnProperty.call(t,s)&&j(t,e,s)};Object.defineProperty(o,"__esModule",{value:!0});u(m(),o);u(b(),o);u(y(),o)});var x={};q(x,{handler:()=>T});module.exports=O(x);var p=_(f()),d={},L=async e=>{let{action:t}=e;switch(t){case"login":return v(e);case"register":return S(e);case"validate":return I(e);default:return{statusCode:400,message:"Invalid action"}}},v=async e=>{let{email:t,password:s}=e;if(!t||!s)return{statusCode:400,message:"Email and password are required"};console.log(`Processing login for: ${t}`);let a=d[t];return!a||a.password!==s?{statusCode:401,message:"Invalid credentials"}:{statusCode:200,message:"Login successful",data:{token:"mock-jwt-token",user:{id:a.id,email:a.email,name:a.name}}}},S=async e=>{let{email:t,password:s}=e;if(!t||!s)return{statusCode:400,message:"Email and password are required"};if(console.log(`Processing registration for: ${t}`),d[t])return{statusCode:409,message:"User already exists"};let a=`user_${Date.now()}`;return d[t]={id:a,email:t,password:s,name:e.name},{statusCode:201,message:"Registration successful",data:{user:{id:a,email:t,name:e.name}}}},I=async e=>{let{token:t}=e;return t?(console.log(`Validating token: ${t.substring(0,10)}...`),t==="mock-jwt-token"?{statusCode:200,message:"Token is valid",data:{user:{email:"user@example.com"}}}:{statusCode:401,message:"Invalid token"}):{statusCode:400,message:"Token is required"}};var T=async(e,t)=>{console.log("Lambda function invoked with event:",JSON.stringify(e,null,2));try{let s;e.body?s=JSON.parse(e.body):s={action:e.queryStringParameters?.action||"",email:e.queryStringParameters?.email,password:e.queryStringParameters?.password,token:e.queryStringParameters?.token};let a=await L(s);return{statusCode:a.statusCode,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Content-Type,Authorization","Access-Control-Allow-Methods":"GET,POST,PUT,DELETE,OPTIONS"},body:JSON.stringify({message:a.message,data:a.data})}}catch(s){return console.error("Error processing request:",s),{statusCode:500,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({message:"Internal server error"})}}};0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
